define(["jquery","amd/build/isotope.pkgd.min.js"],function(a,b){var c;return c={init:function(){c.handleFilter(),c.handleIsotope(),c.handleGroupSwitcher(),c.handleViewSizeSwitcher(),c.handleBlockSwitcher()},handleIsotope:function(){a(".openstudio-grid").each(function(){new b("#"+this.id,{layoutMode:"masonry",itemSelector:".openstudio-grid-item",masonry:{columnWidth:243,gutter:20}})})},handleGroupSwitcher:function(){a("#filter_groupid").change(function(){c.redirectURL()})},handleBlockSwitcher:function(){a("#filter_block_activity").change(function(){c.redirectURL()})},handleViewSizeSwitcher:function(){a("#filter_pagesize").change(function(){c.redirectURL()})},redirectURL:function(){var b=a("#view_sort_action_url").val();(b=b+"&vid="+a("#vid").val(),a("#filter_groupid").length)&&(b=b+"&groupid="+a("#filter_groupid").val());if(a("#filter_pagesize").length){b=b+"&pagesize="+a("#filter_pagesize").val()}if(a("#filter_block_activity").length){b=b+"&blockid="+a("#filter_block_activity").val()}window.location.href=b},handleFilter:function(){a("#openstudio_filter_types_0").on("click",function(b){if(!a(this).is(":checked"))return b.preventDefault(),!1;a(".openstudio-filter-types-checkbox").prop("checked",!1),a("#openstudio_filter_types_0").prop("checked",!0)}),a(".openstudio-filter-types-checkbox").on("click",function(b){var c=a(this);c.is(":checked")&&"openstudio_filter_types_0"!=c.attr("id")&&a("#openstudio_filter_types_0").prop("checked",!1),0==a('[name="ftypearray[]"]:checked').length&&a("#openstudio_filter_types_0").prop("checked",!0)}),a("#openstudio_filter_user_flags_0").on("click",function(b){if(!a(this).is(":checked"))return b.preventDefault(),!1;a(".openstudio-filter-user-flags-checkbox").prop("checked",!1),a("#openstudio_filter_user_flags_0").prop("checked",!0)}),a(".openstudio-filter-user-flags-checkbox").on("click",function(b){var c=a(this);c.is(":checked")&&"openstudio_filter_types_0"!=c.attr("id")&&a("#openstudio_filter_user_flags_0").prop("checked",!1),0==a('[name="fflagarray[]"]:checked').length&&a("#openstudio_filter_user_flags_0").prop("checked",!0)}),a("#reset_filter_btn").on("click",function(b){a("#reset_filter").val(1),a("#filteractive").val(0),a("#openstudio-filter-form").submit()}),a(".openstudio-filter-block").on("click",function(b){var c=a(this),d=a("#filter_area_activity_value").val(),e=a('[name="fblockarray[]"]:checked').length;c.is(":checked")&&a("#filter_block").val(d),0==e&&a("#filter_block").val(0)}),a("#filter_block").on("change",function(b){var c=a(this).val(),d=a("#filter_area_activity_value").val();parseInt(c)==d?a("#filter_block").val(0):a(".openstudio-filter-block").prop("checked",!1)})}}});
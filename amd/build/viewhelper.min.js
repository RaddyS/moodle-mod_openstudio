define(["jquery","amd/build/isotope.pkgd.min.js"],function(a,b){var c;return c={isotope:null,init:function(){c.handleFilter(),c.handleIsotope(),c.handleGroupSwitcher(),c.handleViewSizeSwitcher(),c.handleBlockSwitcher()},handleIsotope:function(){var d=a(".openstudio-grid");d.each(function(){c.isotope=new b("#"+this.id,{layoutMode:"masonry",itemSelector:".openstudio-grid-item",masonry:{columnWidth:243,gutter:20}})});var e=d.find("img").not(function(){return this.complete}),f=e.length;f?e.load(function(){f--,f||c.isotope.layout()}):c.isotope.layout()},handleGroupSwitcher:function(){a("#filter_groupid").change(function(){c.redirectURL()})},handleBlockSwitcher:function(){a("#filter_block_activity").change(function(){c.redirectURL()})},handleViewSizeSwitcher:function(){a("#filter_pagesize").change(function(){c.redirectURL()})},redirectURL:function(){var b=a("#view_sort_action_url").val(),c=a("#vid").val();if(b=b+"&vid="+c,a("#filter_groupid").length){var d=a("#filter_groupid").val();b=b+"&groupid="+d}if(a("#filter_pagesize").length){var e=a("#filter_pagesize").val();b=b+"&pagesize="+e}if(a("#filter_block_activity").length){var f=a("#filter_block_activity").val();b=b+"&blockid="+f}window.location.href=b},handleFilter:function(){a("#openstudio_filter_types_0").on("click",function(b){var c=a(this);return c.is(":checked")?(a(".openstudio-filter-types-checkbox").prop("checked",!1),void a("#openstudio_filter_types_0").prop("checked",!0)):(b.preventDefault(),!1)}),a(".openstudio-filter-types-checkbox").on("click",function(b){var c=a(this);c.is(":checked")&&"openstudio_filter_types_0"!=c.attr("id")&&a("#openstudio_filter_types_0").prop("checked",!1);var d=a('[name="ftypearray[]"]:checked').length;0==d&&a("#openstudio_filter_types_0").prop("checked",!0)}),a("#openstudio_filter_user_flags_0").on("click",function(b){var c=a(this);return c.is(":checked")?(a(".openstudio-filter-user-flags-checkbox").prop("checked",!1),void a("#openstudio_filter_user_flags_0").prop("checked",!0)):(b.preventDefault(),!1)}),a(".openstudio-filter-user-flags-checkbox").on("click",function(b){var c=a(this);c.is(":checked")&&"openstudio_filter_types_0"!=c.attr("id")&&a("#openstudio_filter_user_flags_0").prop("checked",!1);var d=a('[name="fflagarray[]"]:checked').length;0==d&&a("#openstudio_filter_user_flags_0").prop("checked",!0)}),a("#reset_filter_btn").on("click",function(b){a("#reset_filter").val(1),a("#filteractive").val(0),a("#openstudio-filter-form").submit()}),a(".openstudio-filter-block").on("click",function(b){var c=a(this),d=a("#filter_area_activity_value").val(),e=a('[name="fblockarray[]"]:checked').length;c.is(":checked")&&a("#filter_block").val(d),0==e&&a("#filter_block").val(0)}),a("#filter_block").on("change",function(b){var c=a(this).val(),d=a("#filter_area_activity_value").val();parseInt(c)==d?a("#filter_block").val(0):a(".openstudio-filter-block").prop("checked",!1)})}}});
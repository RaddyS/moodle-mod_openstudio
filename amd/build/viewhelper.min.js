define(["jquery","amd/build/isotope.pkgd.min.js"],function(a,b){var c;return c={isotope:[],mconfig:null,CSS:{SEARCHBOX:"#oustudyplan-query"},init:function(a){c.mconfig=a||{searchtext:""},c.handleFilter(),c.handleIsotope(),c.handleGroupSwitcher(),c.handleViewSizeSwitcher(),c.handleBlockSwitcher(),c.initSearchForm()},handleIsotope:function(){var d=a(".openstudio-grid");d.each(function(){c.isotope.push(new b("#"+this.id,{layoutMode:"masonry",itemSelector:".openstudio-grid-item",masonry:{columnWidth:243,gutter:20,horizontalOrder:!0}}))});var e=d.find("img").not(function(){return this.complete}),f=e.length;f?e.on("load",function(){f--,f||c.reArrangeItems()}):c.reArrangeItems()},reArrangeItems:function(){setTimeout(function(){a.each(c.isotope,function(a,b){b.layout()})},1e3)},handleGroupSwitcher:function(){a(document).on("change","#filter_groupid",function(){c.redirectURL()})},handleBlockSwitcher:function(){a(document).on("change","#filter_block_activity",function(){c.redirectURL()})},handleViewSizeSwitcher:function(){a(document).on("change","#filter_pagesize",function(){c.redirectURL()})},redirectURL:function(){var b=a("#view_sort_action_url").val(),c=a("#vid").val();b=b+"&vid="+c,a(".openstudio-filter-select-box:visible").each(function(){var c=a(this).attr("name");b=b+"&"+c+"="+a(this).val()}),window.location.href=b},handleFilter:function(){a("#openstudio_filter_types_0").on("click",function(b){var c=a(this);return c.is(":checked")?(a(".openstudio-filter-types-checkbox").prop("checked",!1),void a("#openstudio_filter_types_0").prop("checked",!0)):(b.preventDefault(),!1)}),a(".openstudio-filter-types-checkbox").on("click",function(){var b=a(this);b.is(":checked")&&"openstudio_filter_types_0"!=b.attr("id")&&a("#openstudio_filter_types_0").prop("checked",!1);var c=a('[name="ftypearray[]"]:checked').length;0==c&&a("#openstudio_filter_types_0").prop("checked",!0)}),a("#openstudio_filter_user_flags_0").on("click",function(b){var c=a(this);return c.is(":checked")?(a(".openstudio-filter-user-flags-checkbox").prop("checked",!1),void a("#openstudio_filter_user_flags_0").prop("checked",!0)):(b.preventDefault(),!1)}),a(".openstudio-filter-user-flags-checkbox").on("click",function(){var b=a(this);b.is(":checked")&&"openstudio_filter_types_0"!=b.attr("id")&&a("#openstudio_filter_user_flags_0").prop("checked",!1);var c=a('[name="fflagarray[]"]:checked').length;0==c&&a("#openstudio_filter_user_flags_0").prop("checked",!0)}),a("#reset_filter_btn").on("click",function(){a("#reset_filter").val(1),a("#filteractive").val(0),a("#openstudio-filter-form").submit()}),a(".openstudio-filter-block").on("click",function(){var b=a(this),c=a("#filter_area_activity_value").val(),d=a('[name="fblockarray[]"]:checked').length;b.is(":checked")&&a("#filter_block").val(c),0==d&&a("#filter_block").val(0)}),a("#filter_block").on("change",function(){var b=a(this).val(),c=a("#filter_area_activity_value").val();parseInt(b)==c?a("#filter_block").val(0):a(".openstudio-filter-block").prop("checked",!1)}),a(".openstudio-filter-link a").on("click",function(){var b=!a(this).hasClass("collapsed");a(a(this).data("target")).find("input, select").attr("tabindex",b?-1:0)}),a(".openstudio-filter-link a.collapsed").each(function(){a(a(this).data("target")).find("input, select").attr("tabindex",-1)})},initSearchForm:function(){a(c.CSS.SEARCHBOX).val(c.mconfig.searchtext)}}});
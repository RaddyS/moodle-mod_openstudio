define(["jquery","core/ajax","core/str"],function(a,b,c){var d;return d={mconfig:null,CSS:{LOCKBUTTON:"#id_lockbutton",ACTIONITEMS:".openstudio-content-view-container .openstudio-content-actions"},init:function(b){d.mconfig=b,a(d.CSS.LOCKBUTTON).on("click",d.toggleLockContent.bind(d))},toggleLockContent:function(){var b="locked"==a(d.CSS.LOCKBUTTON).attr("data-lockstate");b?d.unlockContent():d.lockContent()},lockContent:function(){M.util.js_pending("openstudioLockContent");var e=b.call([{methodname:"mod_openstudio_external_lock",args:{cmid:d.mconfig.cmid,cid:d.mconfig.cid,locktype:d.mconfig.CONST.ALL}}]);e[0].done(function(){c.get_string("contentactionunlockname","mod_openstudio").done(function(b){a(d.CSS.LOCKBUTTON).attr("value",b).attr("data-lockstate","locked")}),a(d.CSS.ACTIONITEMS).addClass("locked")}).always(function(){M.util.js_complete("openstudioLockContent")}).fail(function(a){window.console.error("Log request failed "+a.message)})},unlockContent:function(){M.util.js_pending("openstudioUnlockContent");var e=b.call([{methodname:"mod_openstudio_external_unlock",args:{cmid:d.mconfig.cmid,cid:d.mconfig.cid,locktype:d.mconfig.CONST.NONE}}]);e[0].done(function(){c.get_string("contentactionlockname","mod_openstudio").done(function(b){a(d.CSS.LOCKBUTTON).attr("value",b).attr("data-lockstate","unlocked")}),a(d.CSS.ACTIONITEMS).removeClass("locked")}).always(function(){M.util.js_complete("openstudioUnlockContent")}).fail(function(a){window.console.error("Log request failed "+a.message)})}}});